<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MyFoshi ‚Äì Malaysia ‚Üí Maldives</title>
<meta name="description" content="MyFoshi: Malaysia ‚Üí Maldives air & sea freight, assist shopping, customs clearance, and delivery." />
<meta name="theme-color" content="#0B2C4A">

<!-- ====== BRAND THEME (MyFoshi: navy + cyan + gold) ====== -->
<style>
  :root{
    --navy:#0B2C4A;--cyan:#0FB9D7;--gold:#F6C343;
    --bg:#f6f7fb;--text:#0f172a;--muted:#64748b;--card:#ffffff;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}
  h1,h2,h3{margin:0 0 .5rem}
  a{text-decoration:none;color:inherit}
  .container{max-width:1200px;margin:0 auto;padding:0 18px}
  /* Top slim cut-off bar */
  .cutoff{position:sticky;top:0;z-index:60;background:#082238;color:#e6f3ff;border-bottom:1px solid rgba(255,255,255,.08)}
  .cutoff .wrap{display:flex;gap:10px;justify-content:center;align-items:center;padding:6px 10px;font-weight:700}
  .cutoff .pill{background:#0FB9D7; color:#fff; padding:4px 8px; border-radius:999px; font-size:.8rem}
  /* Buttons */
  .btn{display:inline-flex;align-items:center;gap:.5rem;border:0;border-radius:12px;padding:12px 18px;font-weight:700;cursor:pointer;transition:.2s}
  .btn-primary{background:var(--gold);color:#111}
  .btn-primary:hover{filter:brightness(1.05);transform:translateY(-1px)}
  .btn-outline{background:transparent;color:#fff;border:2px solid #fff}
  .btn-outline:hover{background:#fff;color:var(--navy)}
  .btn-ghost{background:#fff;border:1px solid #e5e7eb}
  .badge{display:inline-block;background:#fff3cd;color:#7c5a00;border:1px solid #ffe69c;border-radius:10px;padding:4px 8px;font-size:.75rem}
  /* Hero */
  .hero{padding:72px 0;background:linear-gradient(90deg,var(--navy),var(--cyan));color:#fff;text-align:center}
  .hero .buttons{display:flex;justify-content:center;gap:12px;flex-wrap:wrap;margin-top:18px}
  /* Trusted strip */
  .trusted{background:#fff;border-top:1px solid #e5e7eb;border-bottom:1px solid #e5e7eb}
  .trusted .row{display:flex;gap:18px;align-items:center;justify-content:center;flex-wrap:wrap;padding:12px 0}
  .logo{height:28px;opacity:.8;filter:grayscale(1)}
  /* Sections */
  .section{padding:60px 0}
  .center{text-align:center}
  .muted{color:var(--muted)}
  /* Cards & grids */
  .grid{display:grid;gap:18px}
  .cards{grid-template-columns:repeat(4,minmax(0,1fr))}
  @media (max-width:1000px){.cards{grid-template-columns:repeat(2,minmax(0,1fr))}}
  @media (max-width:600px){.cards{grid-template-columns:1fr}}
  .card{background:var(--card);border-radius:18px;box-shadow:0 8px 24px rgba(11,44,74,.08);padding:22px}
  .card:hover{box-shadow:0 16px 36px rgba(11,44,74,.15);transform:translateY(-3px)}
  .row{display:grid;gap:18px;grid-template-columns:repeat(2,minmax(0,1fr))}
  @media (max-width:900px){.row{grid-template-columns:1fr}}
  .tight{margin-top:6px}
  input,select,textarea{width:100%;padding:10px 12px;border:1px solid #e5e7eb;border-radius:12px}
  label{font-size:.9rem;color:var(--muted)}
  .est{display:flex;align-items:center;justify-content:space-between;margin-top:12px}
  .est .value{font-size:1.4rem;font-weight:800}
  /* Tabs */
  .tabs{margin-top:10px}
  .tab-buttons{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-bottom:24px}
  .tab-buttons button, .tab-buttons a{border:1px solid #dbe3ea;background:#fff;color:#334155;padding:10px 14px;border-radius:999px;font-weight:600;cursor:pointer}
  .tab-buttons button.active{background:var(--cyan);border-color:var(--cyan);color:#fff}
  .tab{display:none}
  .tab.active{display:block}
  .split-3{display:grid;gap:18px;grid-template-columns:repeat(3,minmax(0,1fr))}
  @media (max-width:1000px){.split-3{grid-template-columns:1fr}}
  iframe{border:0;border-radius:16px}
  /* CTA & footer */
  .cta{background:var(--navy);color:#fff;padding:60px 0;text-align:center}
  .footer{background:#0b1220;color:#cbd5e1;text-align:center;padding:26px 12px;font-size:.9rem}
  /* Modal */
  .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,.5);display:none;align-items:center;justify-content:center;padding:16px;z-index:90}
  .modal{width:min(880px,100%);background:#fff;border-radius:16px;box-shadow:0 25px 60px rgba(0,0,0,.25);overflow:hidden}
  .modal header{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;background:#f8fafc;border-bottom:1px solid #e5e7eb}
  .modal .content{padding:16px}
  .modal.show{display:flex}
  /* Shops grid */
  .shop-grid{display:grid;gap:16px;grid-template-columns:repeat(4,minmax(0,1fr))}
  @media (max-width:1100px){.shop-grid{grid-template-columns:repeat(3,1fr)}}
  @media (max-width:800px){.shop-grid{grid-template-columns:repeat(2,1fr)}}
  @media (max-width:540px){.shop-grid{grid-template-columns:1fr}}
  .shop-card{display:flex;flex-direction:column;gap:10px;padding:16px;border:1px solid #eef2f7;border-radius:16px;background:#fff}
  .shop-card .actions{display:flex;gap:8px;flex-wrap:wrap}
  .shop-card .btn{padding:8px 12px;border-radius:10px}
  /* Mini Chat launcher (optional helper) */
  .chat-launcher{position:fixed;right:16px;bottom:16px;z-index:95;background:#0FB9D7;color:#fff;border:0;border-radius:999px;padding:12px 14px;font-weight:800;box-shadow:0 12px 28px rgba(0,0,0,.2);cursor:pointer}
  /* Sticky mini quote */
  .mini-quote{position:fixed;left:50%;transform:translateX(-50%);bottom:16px;z-index:94;background:#fff;border:1px solid #e5e7eb;border-radius:14px;box-shadow:0 18px 36px rgba(0,0,0,.15);display:flex;gap:10px;align-items:center;padding:10px 12px}
  .mini-quote .vals{display:flex;gap:12px;font-weight:800}
  .mini-quote .btn{padding:8px 12px}
</style>
</head>
<body>

<!-- ===== CUT-OFF TIMER BAR ===== -->
<div class="cutoff">
  <div class="container wrap">
    <span>Next Air Dispatch:</span>
    <span id="cutCountdown" class="pill">calculating‚Ä¶</span>
    <span class="muted" style="font-weight:600">(every Fri 17:00 MYT)</span>
  </div>
</div>

<!-- ===== HERO ===== -->
<header class="hero">
  <div class="container">
    <h1 style="font-size:clamp(28px,5vw,54px);font-weight:900;">Ship from Malaysia to Maldives</h1>
    <p class="muted" style="color:#e6f3ff">Weekly Air Freight ‚Ä¢ Bi-Weekly Sea Freight ‚Ä¢ Door-to-Door Delivery</p>
    <div class="buttons">
      <a href="#tabs" class="btn btn-primary">Get Quote</a>
      <a href="#track" class="btn btn-outline">Track Parcel</a>
      <!-- Sign in -->
      <button id="openAuth" class="btn btn-ghost" style="background:#fff;color:#0B2C4A">Sign in</button>
    </div>
  </div>
</header>

<!-- ===== TRUSTED BY STRIP ===== -->
<section class="trusted">
  <div class="container">
    <div class="row">
      <span class="muted">Trusted by resorts & partners:</span>
      <img class="logo" src="https://dummyimage.com/120x28/ddd/777&text=Four+Seasons" alt="Four Seasons placeholder"/>
      <img class="logo" src="https://dummyimage.com/120x28/ddd/777&text=Hilton" alt="Hilton placeholder"/>
      <img class="logo" src="https://dummyimage.com/120x28/ddd/777&text=Hyatt" alt="Hyatt placeholder"/>
      <img class="logo" src="https://dummyimage.com/120x28/ddd/777&text=Jaya+Grocer" alt="Jaya Grocer placeholder"/>
    </div>
  </div>
</section>

<!-- ===== TABS ===== -->
<section id="tabs" class="section" style="padding-top:30px;">
  <div class="container">
    <div class="tabs">
      <div class="tab-buttons" id="tabButtons">
        <button data-tab="rates" class="active">Rates</button>
        <button data-tab="converters">Converters</button>
        <button data-tab="shops">Shops</button>
        <button data-tab="assist">Online Assist Shopping</button>
        <button data-tab="services">Freight Services</button>
        <button data-tab="prohibited">Prohibited Items</button>
        <button data-tab="gform">Quick Quote (Google Form)</button>
        <a href="https://tzresources.com.my/" target="_blank" rel="noopener">TZ Resources ‚Üó</a>
      </div>

      <!-- ===== RATES ===== -->
      <div id="rates" class="tab active">
        <h2 class="center" style="font-size:1.8rem;margin-bottom:18px;">Rate Calculator</h2>
        <div class="row">
          <!-- Air -->
          <div class="card">
            <h3>‚úàÔ∏è Air Freight (by weight)</h3>
            <div class="grid" style="grid-template-columns:repeat(2,1fr);margin-top:10px;">
              <div><label>Weight (kg)</label><input id="airKg" type="number" min="0" value="5"></div>
              <div><label>Base fee (USD)</label><input id="airBase" type="number" min="0" value="10"></div>
              <div><label>Rate per kg (USD)</label><input id="airPerKg" type="number" min="0" step="0.1" value="6.5"></div>
            </div>
            <div class="est"><div class="muted">Estimate:</div><div id="airOut" class="value">USD 42.50</div></div>
          </div>

          <!-- Sea -->
          <div class="card">
            <h3>üö¢ Sea Freight (by volume)</h3>
            <div class="grid" style="grid-template-columns:repeat(3,1fr);margin-top:10px;">
              <div><label>Length (cm)</label><input id="len" type="number" min="0" value="50"></div>
              <div><label>Width (cm)</label><input id="wid" type="number" min="0" value="40"></div>
              <div><label>Height (cm)</label><input id="hei" type="number" min="0" value="30"></div>
            </div>
            <div class="grid" style="grid-template-columns:repeat(2,1fr);gap:10px;margin-top:10px;">
              <div><label>Rate per m¬≥ (USD)</label><input id="rateM3" type="number" min="0" value="495"></div>
              <div style="display:flex;align-items:flex-end;"><div class="badge">Volume: <b id="m3Out">0.060</b> m¬≥</div></div>
            </div>
            <div class="est"><div class="muted">Estimate:</div><div id="seaOut" class="value">USD 29.70</div></div>
            <button id="reset" class="btn btn-ghost" style="margin-top:10px;">‚Üª Reset</button>
          </div>
        </div>

        <!-- Multi-box calculator -->
        <div class="card" style="margin-top:18px;">
          <h3>üì¶ Multi-Box Calculator</h3>
          <table id="boxes" style="width:100%;border-collapse:collapse">
            <thead>
              <tr style="text-align:left">
                <th>Qty</th><th>L (cm)</th><th>W (cm)</th><th>H (cm)</th><th>KG (actual)</th><th></th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <button id="addBox" class="btn btn-ghost" style="margin-top:10px;">+ Add box</button>
          <div class="est"><div class="muted">Total Volume:</div><div class="value"><span id="sumM3">0.000</span> m¬≥</div></div>
          <div class="est"><div class="muted">Total Actual Weight:</div><div class="value"><span id="sumKg">0.00</span> kg</div></div>
          <div class="est"><div class="muted">Air Chargeable (volumetric √∑ 6000):</div><div class="value"><span id="sumVolKg">0.00</span> kg</div></div>
          <div style="text-align:right;margin-top:10px;">
            <button id="waQuote" class="btn btn-primary">Send WhatsApp Quote</button>
          </div>
        </div>

        <!-- My Requests mini dashboard -->
        <div class="card" style="margin-top:18px;">
          <h3>üóÇÔ∏è My Requests</h3>
          <ul id="reqList" class="tight"></ul>
        </div>
      </div>

      <!-- ===== CONVERTERS ===== -->
      <div id="converters" class="tab">
        <h2 class="center" style="font-size:1.8rem;margin-bottom:18px;">Converters</h2>
        <div class="row">
          <div class="card">
            <h3>üìè Length/Volume</h3>
            <div class="grid" style="grid-template-columns:repeat(3,1fr);gap:10px;">
              <div><label>Length (cm)</label><input id="cL" type="number" value="50"></div>
              <div><label>Width (cm)</label><input id="cW" type="number" value="40"></div>
              <div><label>Height (cm)</label><input id="cH" type="number" value="30"></div>
            </div>
            <div class="est tight"><div class="muted">m¬≥</div><div class="value" id="cM3">0.060</div></div>
            <div class="grid" style="grid-template-columns:repeat(2,1fr);gap:10px;margin-top:10px;">
              <div><label>KG (actual)</label><input id="cKG" type="number" value="5"></div>
              <div><label>Air Volumetric (√∑ 6000)</label><input id="cVolKG" type="text" readonly></div>
            </div>
          </div>
          <div class="card">
            <h3>üí± Live Currency & Fees</h3>
            <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px">
              <div><label>MYR</label><input id="amtMYR" type="number" value="1000"></div>
              <div><label>USD (fx)</label><input id="outUSD" type="text" readonly></div>
              <div><label>MVR (fx)</label><input id="outMVR" type="text" readonly></div>
            </div>
            <small class="muted">Rates via exchangerate.host (auto-refresh on load).</small>
            <div class="est"><div class="muted">Service Fee (5% or MYR 10 min)</div><div class="value" id="feeMYR">MYR 50.00</div></div>
          </div>
        </div>
      </div>

      <!-- ===== SHOPS ===== -->
      <div id="shops" class="tab">
        <h2 class="center" style="font-size:1.8rem;margin-bottom:18px;">Popular Shops</h2>

        <!-- Filters -->
        <div class="card" style="margin:12px 0;display:flex;gap:10px;flex-wrap:wrap;align-items:center;">
          <input id="q" type="search" placeholder="Search stores‚Ä¶" style="flex:1;min-width:220px">
          <select id="cat">
            <option value="">All categories</option>
            <option>Groceries</option><option>Electronics</option><option>Furniture</option><option>Fashion</option>
          </select>
          <select id="ship"><option value="">Ships to our WH</option><option value="yes">Yes</option><option value="no">No</option></select>
          <button id="clear" class="btn btn-ghost">Clear</button>
        </div>

        <div id="shopsGrid" class="shop-grid"></div>
        <p class="center muted tight">Tip: ‚ÄúAdd to Request‚Äù pushes a shop link into the Assist form automatically.</p>
      </div>

      <!-- ===== ASSIST SHOPPING ===== -->
      <div id="assist" class="tab">
        <h2 class="center" style="font-size:1.8rem;margin-bottom:18px;">Online Assist Shopping</h2>
        <div class="split-3">
          <div class="card"><h3>üõçÔ∏è Personal Shopper</h3><p class="muted">Send links (Shopee, Lazada, Ikea, etc.). We purchase, receive, and consolidate for you.</p></div>
          <div class="card"><h3>üß∞ Packaging & Wrapping</h3><p class="muted">Bubble wrap, double-wall cartons, and tape for safety.</p></div>
          <div class="card"><h3>üí≥ Transparent Pricing</h3><p class="muted">Fee: <b>5%</b> of item value or min <b>MYR 10</b> + domestic shipping (if any).</p></div>
        </div>
        <div class="center" style="margin-top:18px;">
          <button id="openShoppingForm" class="btn btn-primary">Request Assist Shopping</button>
        </div>
      </div>

      <!-- ===== SERVICES ===== -->
      <div id="services" class="tab">
        <h2 class="center" style="font-size:1.8rem;margin-bottom:18px;">Freight & Handling Services</h2>
        <div class="split-3">
          <div class="card"><h3>üè¨ Warehouse Storage</h3><p class="muted">Short-term holding while we consolidate. Photo updates on request.</p></div>
          <div class="card"><h3>üßæ Customs Handling</h3><p class="muted">Documentation & Maldives customs clearance. Duties/taxes per regulation.</p></div>
          <div class="card"><h3>üöö Final-mile Delivery</h3><p class="muted">Delivery to Mal√©/Hulhumal√© and jetty drop-off for atolls.</p></div>
        </div>
      </div>

      <!-- ===== PROHIBITED ITEMS + WIZARD ===== -->
      <div id="prohibited" class="tab">
        <h2 class="center" style="font-size:1.8rem;margin-bottom:18px;">Prohibited & Restricted Items</h2>
        <div class="cards grid">
          <div class="card"><h3>‚ùå Flammables</h3><p class="muted">Aerosols, fuels, lighters, perfumes with high alcohol.</p></div>
          <div class="card"><h3>‚ùå Hazardous</h3><p class="muted">Batteries not packed per IATA/IMDG, chemicals, corrosives.</p></div>
          <div class="card"><h3>‚ùå Restricted Foods</h3><p class="muted">Certain meats, liquids in excess, non-Halal products (subject to local law).</p></div>
          <div class="card"><h3>‚ùå Others</h3><p class="muted">Cash, precious stones, illegal items as per Malaysia/Maldives law.</p></div>
        </div>
        <div class="card" style="margin-top:16px;">
          <h3>üß≠ Quick Check Wizard</h3>
          <p class="muted">Answer a few questions to see if your item may be restricted.</p>
          <div id="wiz" class="grid" style="grid-template-columns:1fr 1fr;gap:10px">
            <div>
              <label>Is it liquid, aerosol, or gel?</label>
              <select id="w1"><option>No</option><option>Yes</option></select>
            </div>
            <div>
              <label>Contains battery or magnet?</label>
              <select id="w2"><option>No</option><option>Yes</option></select>
            </div>
            <div>
              <label>Is it perishable (fresh/frozen)?</label>
              <select id="w3"><option>No</option><option>Yes</option></select>
            </div>
            <div>
              <label>High value (&gt; MYR 2500)?</label>
              <select id="w4"><option>No</option><option>Yes</option></select>
            </div>
          </div>
          <div class="est"><div class="muted">Result:</div><div id="wizOut" class="value">Looks OK ‚Äî proceed to quote.</div></div>
          <div style="text-align:right;margin-top:10px;"><a id="wizWA" class="btn btn-primary" href="#">Ask on WhatsApp</a></div>
        </div>
      </div>

      <!-- ===== GOOGLE FORM (Standalone tab) ===== -->
      <div id="gform" class="tab">
        <h2 class="center" style="font-size:1.8rem;margin-bottom:18px;">Quick Quote ‚Äî Google Form</h2>
        <div class="card" style="max-width:900px;margin:0 auto;">
          <div style="display:flex;justify-content:flex-end;gap:8px;margin:0 0 10px;">
            <a href="https://docs.google.com/forms/d/e/YOUR_FORM_ID/viewform" target="_blank" rel="noopener" class="btn btn-ghost">Open full form ‚Üó</a>
          </div>
          <iframe title="MyFoshi Google Form" src="https://docs.google.com/forms/d/e/YOUR_FORM_ID/viewform?embedded=true" width="100%" height="760">Loading‚Ä¶</iframe>
        </div>
        <p class="muted center" style="margin-top:8px;">Replace <code>YOUR_FORM_ID</code> with your actual Google Form ID (Send ‚Üí Embed &lt;&gt;).</p>
      </div>

    </div>
  </div>
</section>

<!-- ===== CTA / TRACK ===== -->
<section id="track" class="cta">
  <div class="container">
    <h2 style="font-size:2rem;margin-bottom:6px;">Track Your Shipment</h2>
    <p class="muted" style="color:#dbeafe;margin-bottom:14px;">Enter your tracking ID.</p>
    <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-bottom:14px;">
      <input id="trkId" type="text" placeholder="Enter AWB/BL/Order ID" style="min-width:260px;max-width:360px;">
      <button id="trkBtn" class="btn btn-primary">Track</button>
    </div>
    <a href="https://example.com/track" class="btn btn-outline">Go to Tracking Page</a>
  </div>
</section>

<footer class="footer">
  ¬© 2025 MyFoshi Sdn. Bhd. ¬∑ Malaysia ‚áÑ Maldives Logistics Partner
  <div style="margin-top:8px;display:flex;gap:10px;justify-content:center;flex-wrap:wrap;">
    <a class="btn btn-ghost" href="#gform" onclick="openTab('gform');return false;">Get Quote</a>
    <a class="btn btn-ghost" href="#assist" onclick="openTab('assist');return false;">Assist Shopping</a>
  </div>
</footer>

<!-- ===== STICKY MINI QUOTE CARD ===== -->
<div id="miniQuote" class="mini-quote" style="display:none">
  <div class="vals">
    <span>‚úàÔ∏è <span id="miniAir">USD 0.00</span></span>
    <span>üö¢ <span id="miniSea">USD 0.00</span></span>
  </div>
  <button id="miniWA" class="btn btn-primary">Send WhatsApp</button>
</div>

<!-- ===== ASSIST SHOPPING MODAL (Google Form embedded + native form) ===== -->
<div id="shoppingModal" class="modal-backdrop">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="shoppingTitle">
    <header>
      <h3 id="shoppingTitle">Assist Shopping Request</h3>
      <button id="closeShoppingForm" class="btn btn-ghost">‚úï</button>
    </header>
    <div class="content">
      <!-- Native form -->
      <form id="assistForm" class="grid" style="grid-template-columns:1fr 1fr;gap:12px;">
        <div><label>Your Name</label><input id="fName" type="text" required placeholder="Full name"></div>
        <div><label>WhatsApp / Phone</label><input id="fPhone" type="tel" required placeholder="+60 ..."></div>
        <div class="grid" style="grid-column:1/-1;grid-template-columns:1fr 1fr;gap:12px;">
          <div><label>Email</label><input id="fEmail" type="email" required placeholder="you@example.com"></div>
          <div>
            <label>Preferred Contact</label>
            <select id="fPref"><option>WhatsApp</option><option>Email</option><option>Phone Call</option></select>
          </div>
        </div>
        <div style="grid-column:1/-1">
          <label>Product Links (one per line)</label>
          <textarea id="fLinks" rows="4" placeholder="https://shopee...&#10;https://lazada..."></textarea>
        </div>
        <div class="grid" style="grid-template-columns:1fr 1fr;gap:12px;grid-column:1/-1;">
          <div><label>Budget (MYR)</label><input id="fBudget" type="number" min="0" placeholder="e.g., 350"></div>
          <div><label>Urgency</label>
            <select id="fUrgency"><option>Standard (3‚Äì7 days)</option><option>Urgent (1‚Äì2 days)</option></select>
          </div>
        </div>
        <div style="grid-column:1/-1;text-align:right;margin-top:6px;">
          <button type="submit" class="btn btn-primary">Submit Request</button>
        </div>
      </form>

      <p class="muted center" style="margin:10px 0">‚Äî or ‚Äî</p>

      <!-- Google Form: Embed + "Open full form" (MOCK FORM ID) -->
      <div style="display:flex;justify-content:flex-end;gap:8px;margin:8px 0 10px;">
        <a href="https://docs.google.com/forms/d/e/YOUR_FORM_ID/viewform"
           target="_blank" rel="noopener"
           class="btn btn-ghost">Open full form ‚Üó</a>
      </div>
      <div class="card" style="padding:10px;">
        <iframe
          title="Assist Shopping Google Form"
          src="https://docs.google.com/forms/d/e/YOUR_FORM_ID/viewform?embedded=true"
          width="100%" height="520">Loading‚Ä¶</iframe>
      </div>
      <p class="muted" style="font-size:.8rem;margin-top:6px;">Replace both URLs with your Google Form. Remove the native form if you only want Google Form.</p>
    </div>
  </div>
</div>

<!-- ===== AUTH MODAL (Firebase Auth: Google + Email/Password) ===== -->
<div id="authModal" class="modal-backdrop">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="authTitle">
    <header>
      <h3 id="authTitle">Sign in</h3>
      <button id="closeAuth" class="btn btn-ghost">‚úï</button>
    </header>
    <div class="content">
      <div class="grid" style="grid-template-columns:1fr;gap:12px;max-width:520px;margin:auto;">
        <button id="googleSignIn" class="btn btn-primary" style="justify-content:center;">Continue with Google</button>
        <div class="muted center" style="margin:6px 0">‚Äî or ‚Äî</div>
        <form id="emailAuthForm" class="grid" style="grid-template-columns:1fr 1fr;gap:12px;">
          <div style="grid-column:1/-1"><label>Email</label><input id="authEmail" type="email" required placeholder="you@example.com"></div>
          <div style="grid-column:1/-1"><label>Password</label><input id="authPass" type="password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"></div>
          <div style="grid-column:1/-1;display:flex;gap:8px;justify-content:flex-end;">
            <button id="emailSignInBtn" type="button" class="btn btn-ghost">Sign in</button>
            <button id="emailSignUpBtn" type="button" class="btn btn-primary">Create account</button>
          </div>
        </form>
        <p id="authMsg" class="muted center" style="min-height:20px;"></p>
      </div>
    </div>
  </div>
</div>

<!-- ===== Firebase SDKs (mock config below) ===== -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>

<script>
/* ===== Helpers ===== */
const $ = sel => document.querySelector(sel);
const $$ = sel => [...document.querySelectorAll(sel)];
function num(v){ const n=parseFloat(v); return isNaN(n)?0:n; }
function openTab(id){ $$('#tabButtons button').forEach(b=>{b.classList.toggle('active', b.dataset.tab===id)}); $$('.tab').forEach(t=>t.classList.remove('active')); document.getElementById(id).classList.add('active'); document.getElementById(id).scrollIntoView({behavior:'smooth',block:'start'}); }

/* ===== Cut-off countdown (weekly Fri 17:00 MYT) ===== */
function nextCutoff(){
  const now = new Date();
  const day = now.getDay(); // 0 Sun ... 5 Fri
  const target = new Date(now);
  target.setHours(17,0,0,0); // 17:00
  const daysToFri = (5 - day + 7) % 7; // days until Friday
  target.setDate(now.getDate() + (day>5 || (day===5 && now>target) ? (7 - ((day-5+7)%7)) : daysToFri));
  if(day<5) target.setDate(now.getDate()+daysToFri);
  if(day===5 && now>target) target.setDate(now.getDate()+7);
  return target;
}
function tickCut(){
  const t = nextCutoff();
  const d = t - new Date();
  if(d<=0){ document.getElementById('cutCountdown').textContent = 'Loading‚Ä¶'; setTimeout(tickCut,1000); return; }
  const h = Math.floor(d/36e5), m = Math.floor((d%36e5)/6e4), s=Math.floor((d%6e4)/1e3);
  const days = Math.floor(h/24), hrs = h%24;
  document.getElementById('cutCountdown').textContent = `${days}d ${hrs}h ${m}m ${s}s`;
}
setInterval(tickCut,1000); tickCut();

/* ===== Tabs ===== */
(function(){
  const buttons=document.querySelectorAll('#tabButtons button');
  const tabIds=['rates','converters','shops','assist','services','prohibited','gform'];
  const tabs=tabIds.map(id=>document.getElementById(id));
  buttons.forEach(btn=>{
    btn.addEventListener('click',()=>{
      buttons.forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      tabs.forEach(t=>t.classList.remove('active'));
      document.getElementById(btn.dataset.tab).classList.add('active');
      document.getElementById(btn.dataset.tab).scrollIntoView({behavior:'smooth',block:'start'});
      if(btn.dataset.tab==='gform'){ dataLayer.push({event:'quote_opened'}); }
    });
  });
})();

/* ===== Air & Sea (single) ===== */
function calcAir(){
  const airKg=num($('#airKg').value);
  const airBase=num($('#airBase').value);
  const airPerKg=num($('#airPerKg').value);
  const est = Math.max(0, airBase + airPerKg*airKg);
  $('#airOut').textContent = 'USD ' + est.toFixed(2);
  $('#miniAir').textContent = 'USD ' + est.toFixed(2);
}
['#airKg','#airBase','#airPerKg'].forEach(s=>$(s).addEventListener('input',calcAir)); calcAir();

function calcSea(){
  const L=num($('#len').value), W=num($('#wid').value), H=num($('#hei').value);
  const rate=num($('#rateM3').value);
  const m3 = Math.max(0,(L*W*H)/1_000_000);
  const est = Math.max(0, rate * m3);
  $('#m3Out').textContent = m3.toFixed(3);
  $('#seaOut').textContent = 'USD ' + est.toFixed(2);
  $('#miniSea').textContent = 'USD ' + est.toFixed(2);
}
['#len','#wid','#hei','#rateM3'].forEach(s=>$(s).addEventListener('input',calcSea));
$('#reset').addEventListener('click',()=>{ $('#len').value=50; $('#wid').value=40; $('#hei').value=30; $('#rateM3').value=495; calcSea();});
calcSea();

/* ===== Show sticky quote only on Rates tab ===== */
function toggleMiniQuote(){
  const ratesActive = document.getElementById('rates').classList.contains('active');
  document.getElementById('miniQuote').style.display = ratesActive? 'flex':'none';
}
setInterval(toggleMiniQuote,400);

/* ===== Multi-box ===== */
const tbody = document.querySelector('#boxes tbody');
function row(q=1,l=40,w=30,h=30,kg=5){
  const tr=document.createElement('tr'); tr.innerHTML=`
  <td><input type="number" min="1" value="${q}" style="width:70px"></td>
  <td><input type="number" min="0" value="${l}" style="width:90px"></td>
  <td><input type="number" min="0" value="${w}" style="width:90px"></td>
  <td><input type="number" min="0" value="${h}" style="width:90px"></td>
  <td><input type="number" min="0" value="${kg}" style="width:100px"></td>
  <td><button class="btn btn-ghost">üóë</button></td>`;
  tbody.appendChild(tr);
  tr.querySelector('button').onclick=()=>{ tr.remove(); recalc(); };
  tr.querySelectorAll('input').forEach(i=>i.oninput=recalc);
}
function recalc(){
  let m3=0, kg=0, volKg=0;
  [...tbody.querySelectorAll('tr')].forEach(tr=>{
    const [q,l,w,h,wkg] = [...tr.querySelectorAll('input')].map(i=>parseFloat(i.value)||0);
    const cbm = (l*w*h/1_000_000) * q;
    m3 += cbm;
    kg += wkg*q;
    volKg += ((l*w*h)/6000) * q;
  });
  $('#sumM3').textContent=m3.toFixed(3);
  $('#sumKg').textContent=kg.toFixed(2);
  $('#sumVolKg').textContent=volKg.toFixed(2);
}
$('#addBox').onclick=()=>{ row(); recalc(); };
row(); recalc();

/* ===== WhatsApp quick quote (MOCK NUMBER) ===== */
function composeWA(){
  return encodeURIComponent(
`Hi MyFoshi, can I get a quote?
Boxes CBM: ${$('#sumM3')?.textContent} m¬≥
Actual weight: ${$('#sumKg')?.textContent} kg
Air volumetric: ${$('#sumVolKg')?.textContent} kg
Links:
${$('#fLinks')?.value||'-'}
`);
}
$('#waQuote').onclick=()=>{ dataLayer.push({event:'wa_click'}); location.href = `https://wa.me/60123456789?text=${composeWA()}`; };
$('#miniWA').onclick=()=>{ dataLayer.push({event:'wa_click'}); location.href = `https://wa.me/60123456789?text=${composeWA()}`; };

/* ===== Converters ===== */
function recalcConv(){
  const L=num($('#cL').value), W=num($('#cW').value), H=num($('#cH').value), KG=num($('#cKG').value);
  const m3 = (L*W*H)/1_000_000; $('#cM3').textContent = m3.toFixed(3);
  const vol = (L*W*H)/6000; $('#cVolKG').value = vol.toFixed(2);
}
['#cL','#cW','#cH','#cKG'].forEach(s=>$(s).addEventListener('input',recalcConv)); recalcConv();

/* ===== Live FX ===== */
let fx = {USD:0.0, MVR:0.0};
async function loadFx(){
  try{
    const r = await fetch('https://api.exchangerate.host/latest?base=MYR&symbols=USD,MVR');
    const j = await r.json(); fx.USD=j.rates.USD; fx.MVR=j.rates.MVR; conv();
  }catch(e){ console.warn('FX error',e); }
}
function conv(){
  const myr = parseFloat($('#amtMYR').value)||0;
  $('#outUSD').value = (myr*fx.USD).toFixed(2);
  $('#outMVR').value = (myr*fx.MVR).toFixed(2);
  const fee = Math.max(10, myr*0.05);
  $('#feeMYR').textContent = 'MYR ' + fee.toFixed(2);
}
$('#amtMYR').oninput=conv; loadFx();

/* ===== Shops data + filters + add-to-request ===== */
const STORES = [
  {name:'Ikea Malaysia', url:'https://www.ikea.com/my/en/', cat:'Furniture', ships:'yes'},
  {name:'Jaya Grocer', url:'https://jayagrocer.com/', cat:'Groceries', ships:'yes'},
  {name:'AEON', url:'https://www.aeonretail.com.my/', cat:'Groceries', ships:'yes'},
  {name:'Machines', url:'https://www.machines.com.my/', cat:'Electronics', ships:'yes'},
  {name:'Zalora', url:'https://www.zalora.com.my/', cat:'Fashion', ships:'yes'},
  {name:'Lazada', url:'https://www.lazada.com.my/', cat:'Electronics', ships:'yes'},
  {name:'Shopee', url:'https://shopee.com.my/', cat:'Electronics', ships:'yes'},
  {name:'Village Grocer', url:'https://villagegrocer.com.my/', cat:'Groceries', ships:'yes'},
  {name:'Lotus‚Äôs', url:'https://www.lotuss.com.my/', cat:'Groceries', ships:'yes'},
  {name:'99 Speedmart', url:'https://www.99speedmart.com.my/', cat:'Groceries', ships:'yes'},
  {name:'KK MART', url:'https://www.kkmarts.com/', cat:'Groceries', ships:'yes'},
  {name:'Decathlon MY', url:'https://www.decathlon.my/', cat:'Fashion', ships:'yes'},
  {name:'MR.DIY', url:'https://www.mrdiy.com/my/', cat:'Electronics', ships:'yes'}
];
function renderShopCards(list){
  const grid = $('#shopsGrid'); grid.innerHTML='';
  list.forEach(s=>{
    const el = document.createElement('div');
    el.className='shop-card';
    el.innerHTML = `
      <div style="display:flex;justify-content:space-between;gap:10px;align-items:center;">
        <div style="font-weight:800">${s.name}</div>
        <span class="badge">${s.cat}</span>
      </div>
      <div class="muted" style="word-break:break-all;font-size:.9rem;">${s.url}</div>
      <small class="muted">Ships to our WH: <b>${s.ships==='yes'?'Yes':'Check'}</b></small>
      <div class="actions">
        <a class="btn btn-ghost" href="${s.url}" target="_blank" rel="noopener">Open</a>
        <button class="btn btn-primary" data-add="${s.url}">Add to Request</button>
      </div>`;
    grid.appendChild(el);
  });
  grid.querySelectorAll('button[data-add]').forEach(b=>{
    b.onclick=()=>{
      const ta = $('#fLinks');
      ta.value = (ta.value?ta.value+'
':'') + b.dataset.add;
      dataLayer.push({event:'shop_add_to_request'});
      b.textContent='Added ‚úì'; setTimeout(()=>b.textContent='Add to Request',900);
    }
  });
}
function applyFilters(){
  const q = $('#q').value.trim().toLowerCase();
  const cat = $('#cat').value;
  const ship = $('#ship').value;
  renderShopCards(STORES.filter(s=>
    (!q || s.name.toLowerCase().includes(q) || s.url.toLowerCase().includes(q)) &&
    (!cat || s.cat===cat) &&
    (!ship || s.ships===ship)
  ));
}
renderShopCards(STORES);
['q','cat','ship'].forEach(id=>document.getElementById(id).addEventListener('input',applyFilters));
$('#clear').onclick=()=>{ q.value=''; cat.value=''; ship.value=''; applyFilters(); };

/* ===== Assist modal gating (Firebase) ===== */
const modal = $('#shoppingModal');
const openAssistBtn = $('#openShoppingForm');
const closeAssistBtn = $('#closeShoppingForm');

/* ===== Firebase Auth (MOCK CONFIG) ===== */
const firebaseConfig = {
  apiKey: "YOUR_FIREBASE_API_KEY",
  authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
  projectId: "YOUR_PROJECT_ID",
  appId: "YOUR_APP_ID"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();

const authModal = $('#authModal');
const openAuthBtn = $('#openAuth');
const closeAuthBtn = $('#closeAuth');

function showAuth(){ authModal.classList.add('show'); }
function hideAuth(){ authModal.classList.remove('show'); }

openAuthBtn.addEventListener('click', showAuth);
closeAuthBtn.addEventListener('click', hideAuth);
authModal.addEventListener('click',e=>{ if(e.target===authModal) hideAuth(); });

// Google sign-in
$('#googleSignIn').addEventListener('click', async ()=>{
  try{
    const provider = new firebase.auth.GoogleAuthProvider();
    await auth.signInWithPopup(provider);
    hideAuth();
  }catch(err){ $('#authMsg').textContent = err.message; }
});
// Email sign in / sign up
async function emailSignIn(){
  const email = $('#authEmail').value.trim();
  const pass = $('#authPass').value;
  try{ await auth.signInWithEmailAndPassword(email, pass); hideAuth(); }
  catch(err){ $('#authMsg').textContent = err.message; }
}
async function emailSignUp(){
  const email = $('#authEmail').value.trim();
  const pass = $('#authPass').value;
  try{ await auth.createUserWithEmailAndPassword(email, pass); hideAuth(); }
  catch(err){ $('#authMsg').textContent = err.message; }
}
$('#emailSignInBtn').addEventListener('click', emailSignIn);
$('#emailSignUpBtn').addEventListener('click', emailSignUp);

let currentUser = null;
function updateAuthUI(user){
  currentUser = user;
  if(user){
    openAuthBtn.textContent = user.displayName ? `Hi, ${user.displayName.split(' ')[0]}` : 'Account';
    openAuthBtn.onclick = ()=>{
      if(confirm(`${user.email || 'You'} are signed in.

Sign out?`)){ auth.signOut(); }
    };
  }else{
    openAuthBtn.textContent = 'Sign in';
    openAuthBtn.onclick = showAuth;
  }
}
auth.onAuthStateChanged(updateAuthUI);

// Gate Assist modal
openAssistBtn.addEventListener('click',()=>{
  if(!currentUser){ showAuth(); return; }
  dataLayer.push({event:'assist_opened'});
  modal.classList.add('show');
});
closeAssistBtn.addEventListener('click',()=> modal.classList.remove('show'));
modal.addEventListener('click',e=>{ if(e.target===modal) modal.classList.remove('show'); });

// Native Assist form submit ‚Üí save draft + alert
$('#assistForm').addEventListener('submit',e=>{
  e.preventDefault();
  if(!currentUser){ showAuth(); return; }
  saveDraft();
  dataLayer.push({event:'assist_submit'});
  alert('Thank you! Your Assist Shopping request has been received.');
  modal.classList.remove('show');
  ['#fName','#fPhone','#fEmail','#fLinks','#fBudget'].forEach(id=>$(id).value='');
  $('#fPref').selectedIndex=0; $('#fUrgency').selectedIndex=0;
});

/* ===== My Requests (localStorage) ===== */
function saveDraft(){
  const draft = {
    t: Date.now(),
    links: $('#fLinks')?.value||'',
    m3: $('#sumM3')?.textContent||'0'
  };
  const all = JSON.parse(localStorage.getItem('mf_req')||'[]');
  all.unshift(draft); localStorage.setItem('mf_req', JSON.stringify(all)); renderReq();
}
function renderReq(){
  const ul = $('#reqList'); if(!ul) return;
  const all = JSON.parse(localStorage.getItem('mf_req')||'[]');
  ul.innerHTML = all.slice(0,5).map(x=> `<li>${new Date(x.t).toLocaleString()} ‚Äî ${x.m3} m¬≥<br><small class="muted">${(x.links||'').split('
')[0]||'No links'}</small></li>`).join('');
}
renderReq();

/* ===== Prohibited Wizard logic ===== */
function wizEval(){
  const a=$('#w1').value==='Yes', b=$('#w2').value==='Yes', c=$('#w3').value==='Yes', d=$('#w4').value==='Yes';
  let msg='Looks OK ‚Äî proceed to quote.';
  if(a||b) msg='Might be restricted ‚Äî special packing or airline restrictions apply.';
  if(c) msg='Perishables require cold chain and special handling.';
  if(d) msg='High value ‚Äî customs declaration required. Please check with us.';
  $('#wizOut').textContent=msg;
}
['#w1','#w2','#w3','#w4'].forEach(id=>document.getElementById(id.substring(1)).addEventListener('change',wizEval));
wizEval();
$('#wizWA').href = `https://wa.me/60123456789?text=${encodeURIComponent('Can I ship this item? [photos/description attached]')}`;

/* ===== Tracking input ===== */
$('#trkBtn').onclick=()=>{
  const id = ($('#trkId').value||'').trim();
  if(!id){ alert('Please enter a tracking ID'); return; }
  // TODO: replace with your tracker URL pattern
  window.open('https://example.com/track?id='+encodeURIComponent(id),'_blank');
};

/* ===== PWA (inline manifest + generated service worker) ===== */
(function makePWA(){
  const manifest = {
    name:"MyFoshi", short_name:"MyFoshi",
    start_url:"./myfoshi.html", display:"standalone",
    background_color:"#0B2C4A", theme_color:"#0B2C4A", icons:[]
  };
  const mBlob = new Blob([JSON.stringify(manifest)],{type:'application/json'});
  const mUrl = URL.createObjectURL(mBlob);
  const link = document.createElement('link'); link.rel='manifest'; link.href=mUrl; document.head.appendChild(link);
  const swCode = `
    const CACHE='myfoshi-v1';
    self.addEventListener('install',e=>{e.waitUntil(caches.open(CACHE).then(c=>c.addAll(['./myfoshi.html'])))});
    self.addEventListener('fetch',e=>{e.respondWith(caches.match(e.request).then(r=> r || fetch(e.request)))})`;
  if('serviceWorker' in navigator){
    const swUrl = URL.createObjectURL(new Blob([swCode],{type:'text/javascript'}));
    navigator.serviceWorker.register(swUrl).catch(()=>{});
  }
})();

/* ===== SEO JSON-LD ===== */
(function(){
  const parcel={
    "@context":"https://schema.org",
    "@type":"ParcelDelivery",
    "name":"MyFoshi Malaysia ‚Üí Maldives Shipping",
    "provider":{"@type":"Organization","name":"MyFoshi Sdn. Bhd."},
    "areaServed":["Malaysia","Maldives"],
    "hasOfferCatalog":{"@type":"OfferCatalog","name":"Freight Services","itemListElement":[
      {"@type":"Offer","name":"Air Freight (weekly)"},
      {"@type":"Offer","name":"Sea Freight (bi-weekly)"},
      {"@type":"Offer","name":"Assist Shopping"},
      {"@type":"Offer","name":"Customs Clearance & Delivery"}
    ]}
  };
  const crumbs={
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Home","item":"https://tzresources.com.my/"},
      {"@type":"ListItem","position":2,"name":"MyFoshi","item":"https://tzresources.com.my/myfoshi"}
    ]
  };
  const s1=document.createElement('script'); s1.type='application/ld+json'; s1.textContent=JSON.stringify(parcel);
  const s2=document.createElement('script'); s2.type='application/ld+json'; s2.textContent=JSON.stringify(crumbs);
  document.head.appendChild(s1); document.head.appendChild(s2);
})();

/* ===== GA4/GTM hooks (optional) ===== */
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);} // GA style helper

dataLayer.push({event:'calc_use'});
</script>

<!-- ===== Tawk.to live chat (MOCK ID) ===== -->
<script type="text/javascript">
var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
(function(){
  var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
  s1.async=true;
  s1.src='https://embed.tawk.to/YOUR_TAWK_PROPERTY_ID/DEFAULT';
  s1.charset='UTF-8'; s1.setAttribute('crossorigin','*');
  s0.parentNode.insertBefore(s1,s0);
})();
</script>

<!-- Optional: GTM container (replace GTM-XXXX) -->
<!--
<script>
 (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
 new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
 j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
 })(window,document,'script','dataLayer','GTM-XXXX');
</script>
-->

</body>
</html>
